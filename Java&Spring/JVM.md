# JVM( Java Virtual Machine)
- JVM은 코드를 실행하고, 해당 코드에 대해 런타임 환경을 제공하는 프로그램에 대한 사양이다.
- 자바 애플리케이션을 클래스 로더를 통해 읽어들이고, 자바 API와 함께 실행하는 역할을 수행한다.
- 어느 기기나 **운영체제에 종속적이지 않게** 실행될 수 있도록 해준다.
- **메모리를 관리**하여 최적화를 수행한다.
### 메모리 관리
#### 실행과정
1. 프로그램이 실행되면 JVM은 OS로부터 이 프로그램이 필요로 하는 메모리를 할당 받는다.
	- [I] JVM은 이 메모리를 용도에 따라 **여러 영역으로 나누어 관리**
2.  자바 컴파일러(JAVAC)가 자바 소스코드를 일고, **자바 바이트 코드**로 변환시킨다.
3. 변경된 class 파일들을 **클래스 로더**를 통해 JVM 메모리 영역으로 로딩.
4. 로딩된 class파일들은 **Excution Engine**을 통해 해석된다.

	- ["] Interpreter
		- [ ] 바이트 코드 명령어를 하나씩 읽어서 해석하고 실행
		- [ ] 하나하나 실행은 빠르나, 전체적인 실행속도가 느리다는 단점
	- ["] JIT Compiler
		- [ ] 인터프리터의 단점을 보완하기 위해 도입
		- [ ] 전체를 컴파일하여 바이너리 코드로 변경하고 바이너리 코드를 직접 실행하는 방식이다.
		
5. 해석된 바이트 코드는 메모리 영역에 배치되어 실질적인 수행이 이루어짐 이러한 실행 과정 속 JVM은 필요에 따라 쓰레드 동기화나 가비지 컬렉션 같은 메모리 관리 작업을 수행한다.
#### 메모리 영역
1. 힙 영역
	- 런타임에 동적으로 할당되는 데이터가 저장되는 영역
2. 스택 영역
	- 지역 변수, 매개 변수, 메서드 정보, 임시 데이터 등을 저장
3. 메서드 영역
	- JVM이 시작될 때 생성되고, JVM이 읽은 각각의 클래스와 인터페이스에 대한 런타임 상수 풀, 필드 및 메서드 코드, 정적 변수, 메서드의 바이트 코드 등을 보관
	- [[Reflection]] 에서 이곳을 참조한다.
1. PC 레지스터
	- 스레드가 어떤 명령어로 실행되어야 할 지 기록하는 부분(JVM 명령의 주소를 가진다.) 
2. 네이티브 메서드 스택
	- 실제 실행할 수 있는 기계어로 작성된 프로그램을 실행시키는 영역